# üöÄ AgentDNS Quick Start Guide

## üìã Deploy in 5 Minutes

### üêß Linux Quick Install

```bash
# 1. Clone repository
git clone <repository-url>
cd agentdns-backend

# 2. Run installer (installs dependencies and config)
chmod +x install.sh
sudo ./install.sh

# 3. Start service (tables created on first start)
# If you ran install.sh, use the generated start script
./start_agentdns.sh

# Or start manually
# Dev mode (hot reload)
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# Or run directly
python -m app.main

# 4. Create admin account (after first start)
source venv/bin/activate
python scripts/create_admin_user.py
# Credentials: admin / agentdns_666
```

### üéØ Manual install (detailed)

#### Prerequisites

- Python 3.8+
- PostgreSQL 13+
- Redis 6.0+
- (optional) Docker (for Milvus)
- Linux OS (Ubuntu 18.04+, CentOS 7+, Debian 10+)

#### 1. Environment setup

```bash
# Create venv
python3 -m venv venv

# Activate venv
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

#### 2. Database setup

```sql
-- PostgreSQL
CREATE DATABASE agentdns;
CREATE USER agentdns WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE agentdns TO agentdns;
```

#### 3. Environment configuration

```bash
# Generate keys
python generate_encryption_key.py

# Create and edit .env
# Key configs:
# - DATABASE_URL: PostgreSQL connection string
# - REDIS_URL: Redis connection string  
# - SECRET_KEY: JWT secret (generated by generate_encryption_key.py)
# - ENCRYPTION_KEY: data encryption key
# - OPENAI_API_KEY: OpenAI API key (optional)
```

#### 4. Start the service (tables auto-created on first start)

Tables are created automatically on app start; no manual init needed.

```bash
# Dev mode (hot reload)
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# Or run directly
python -m app.main

# Production (multi-workers)
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

#### 5. Create admin account (after first start)

```bash
# After first start, run this to create admin account
source venv/bin/activate
python scripts/create_admin_user.py

# Default admin
# Username: admin
# Password: agentdns_666
# Change the password in production
```

## üîß Verify installation

Visit the following URLs to confirm the service is up:

- Health check: http://localhost:8000/health
- API Docs: http://localhost:8000/docs
- Home: http://localhost:8000/

## üÜò Troubleshooting

### Common issues

#### 1. Database connection failed

```bash
# Check service status
sudo systemctl status postgresql redis

# Test connections
psql -h localhost -U agentdns -d agentdns
redis-cli ping
```

#### 2. Dependency installation failed

```bash
# Upgrade pip
python -m pip install --upgrade pip

# Install individually
pip install psycopg2-binary
pip install pymilvus
pip install cryptography
```

#### 3. Permission issues

```bash
# Ensure your user can access the DB
sudo -u postgres psql
ALTER USER agentdns CREATEDB;
```

### Get help

- Read more: [README.md](README.md)
- Issues: GitHub Issues
- Email: support@agentdns.com

---

**Quick start complete!** üéâ You can now use AgentDNS!